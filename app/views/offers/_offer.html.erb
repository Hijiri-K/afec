<!-- <div class="offer-modal-wrapper"> -->
<div class="slide" id="touch<%=offer['id']%>">


  <div class="modal-test">
    <div id="login-form">
        <h2>Recieved Offer</h2>
        <div class="post-user-name">
          <%offeruser = User.find_by(id: offer['id'])%>
          <img src="<%="/user_images/#{offeruser.image_name}"%>" alt="">
        <%=link_to("#{offeruser.name}","/users/#{offeruser.id}/show")%>
        </div>
        <div class="info">
            <div class = "post-message"><%=offer['message']%></div>
            <div class= "post-subtitle"><p>You will give</p></div>
            <div class = "post-money mypost-detail"><p id="gettest"><%=offer['give']%></p></div>
            <div class= "post-subtitle"><p>You will recieve</p></div>
            <div class = "post-money mypost-detail" ><p id="givetest"><%=offer['get']%></p></div>
            <div class = "post-subtitle"><p>You can save</p></div>
            <div class = "post-money"><p><span id="savetest"><%=offer['save']%></span>&emsp;&emsp;<i class="fa fa-coffee" aria-hidden="true"></i><%=@coffee%></p></div>
            <div class="invisible" id="idtest"><%=offer['id']%></div>
            <div class="invisible" id="useridtest"><%=offer['user_id']%></div>
            <div class="invisible" id="save2test"><%=offer['save2']%></div>
            <!-- <div class = "post-distance"> <p><%=@distance.to_i%>m</p></div> -->
        <!-- <div><span class = " submit-btn open-map"><%=link_to("Accept", "/posts/acceptoffer",{method:"post"})%></span><span class = "submit-btn"><%=link_to("Decline", "/posts/destroyoffer",{method:"post"})%></span></div> -->
        <div><span class = " submit-btn open-map offer-decline">Accept</span><span class = "submit-btn offer-decline">Decline</span></div>

      </div>
    </div>
  </div>
<!-- </div> -->
</div>

<script type="text/javascript">
$('.open-map').click(function(){
  $('#map-modal').fadeIn();
});


$('.slide').width($('.container-i').width() * 0.85)
$('.initial').width($('.container-i').width() * 0.06)

var slideWidth = $('.slide').outerWidth(); // .slideの幅を取得して代入
var slideNum = $('.slide').length + 1 ;  // .slideの数を取得して代入
var slideSetWidth = slideWidth * slideNum;  // .slideの幅×数で求めた値を代入
$('.slideSet').css('width', slideSetWidth); // .slideSetのスタイルシートにwidth: slideSetWidthを指定

var slideCurrent = 0; // 現在地を示す変数

// アニメーションを実行する独自関数
var sliding = function(){

  // slideCurrentが0以下だったら
  if( slideCurrent < 0 ){
    slideCurrent = slideNum - 2;

  // slideCurrentがslideNumを超えたら
}else if( slideCurrent > slideNum - 2){ // slideCUrrent >= slideNumでも可
    slideCurrent = 0;

  }

  $('.slideSet').animate({
    left: slideCurrent * -slideWidth
  });
}

// 次へボタンが押されたとき
// $('.slider-next').click(function(){
//   slideCurrent++;
//   sliding();
// });
//
// $('.slider-prev').click(function(){
//   slideCurrent--;
//   sliding();
// });
//
// $('.slider-add').click(function(){
//
//   slideNum++;
//   slideSetWidth = slideWidth * slideNum;
//   $('.slideSet').css('width', slideSetWidth);
//   $('.slideSet').append();
// });


// タッチイベントテスト
// $(function() {
//   $(this).on('touchstart', onTouchStart); //指が触れたか検知
//   $(this).on('touchmove', onTouchMove); //指が動いたか検知
//   $(this).on('touchend', onTouchEnd); //指が離れたか検知
//   console.log();
//   var direction, position;
//
//   //スワイプ開始時の横方向の座標を格納
//   function onTouchStart(event) {
//     position = getPosition(event);
//     direction = ''; //一度リセットする
//   }
//
//   //スワイプの方向（left／right）を取得
//   function onTouchMove(event) {
//     console.log(direction)
//     if (position - getPosition(event) > 30) { // 70px以上移動しなければスワイプと判断しない
//       direction = 'left'; //左と検知
//     } else if (position - getPosition(event) < -30){  // 70px以上移動しなければスワイプと判断しない
//       direction = 'right'; //右と検知
//     }
//   }
//
//   function onTouchEnd(event) {
//     console.log("end")
//     moveNum = slideNum - 1
//     if (direction == 'right'){
//       slideCurrent--;
//       sliding();
//     } else if (direction == 'left'){
//       slideCurrent++;
//       sliding();
//     }
//   }
//
//   //横方向の座標を取得
//   function getPosition(event) {
//     return event.originalEvent.touches[0].pageX;
//   }
// });


$('.offer-decline').on("click", function(){
  $(this).parents('.slide').fadeOut().remove();
  slideNum = $('.slide').length + 1
  // console.log(slideNum);
  if (slideNum < 2){
      $('.offer-modal-wrapper-test').fadeOut();
  }

});

</script>
